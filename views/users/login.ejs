<% layout('layouts/boilerplate') %>

<style>
  body {
    background-color: #f3f4f6;
  }
  .auth-wrap {
    max-width: 720px;
    margin: 0 auto 2rem;
  }
  .auth-card {
    border-radius: 1.25rem;
    overflow: hidden;
    background: #fff;
    box-shadow: 0 12px 32px rgba(16, 24, 40, 0.12);
  }
  .auth-form {
    padding: 2rem 2rem;
  }
  @media (min-width: 768px) {
    .auth-form {
      padding: 2.5rem 3rem;
    }
  }

  .auth-logo {
    width: 44px;
    height: 44px;
    display: grid;
    place-items: center;
    margin: 0 auto 0.75rem;
    border-radius: 50%;
    background: #eaf3f6;
    color: #0d6efd;
    font-size: 1.2rem;
  }
  .auth-title {
    text-align: center; /* was center */
    margin-bottom: 1.25rem;
  }
  .auth-subtitle {
    color: #6c757d; /* muted */
    margin-top: 0.25rem;
  }

  .auth-divider {
    border-top: 1px solid #e9ecef;
    margin: 1.25rem 0;
  }
  .auth-bottom {
    margin-top: 0.75rem;
    text-align: center;
    color: #6c757d; /* muted grey */
  }
  .auth-bottom a {
    font-weight: 600; /* bold-ish “Sign up” */
    text-decoration: none;
    white-space: nowrap;
  }
  .auth-bottom a:hover {
    text-decoration: underline;
  }

  /* One-line: "Or log in with  [ Sign in with Google ]" */
  .login-google-inline {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.6rem;
    margin-top: 0.25rem;
    flex-wrap: nowrap;
  }

  /* Google material sign-in button */
  .gsi-material-button {
    background: #fff;
    border: 1px solid #dadce0;
    border-radius: 8px;
    color: #1f1f1f;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 36px;
    padding: 0 12px;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
    transition: box-shadow 0.2s ease;
  }
  .gsi-material-button:hover {
    box-shadow: 0 2px 6px rgba(60, 64, 67, 0.15);
  }
  .gsi-material-button:active {
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.2);
  }
  .gsi-material-button:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.3);
  }

  .gsi-material-button-content-wrapper {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }
  .gsi-material-button-icon {
    width: 18px;
    height: 18px;
    display: inline-flex;
  }
  .gsi-material-button-contents {
    font-weight: 600;
    font-size: 14px;
  }

  @media (max-width: 360px) {
    .login-google-inline {
      flex-wrap: wrap;
    }
  }
</style>

<div class="container auth-wrap">
  <div class="auth-card">
    <div class="auth-form">
      <!-- Logo + Heading -->
      <div class="auth-logo">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="36"
          height="36"
          fill="#000"
          viewBox="0 0 256 256"
          aria-label="CampExplorer logo"
        >
          <path
            d="M223.62,226.42a8,8,0,0,1-10.05,5.2L128,204.39,42.43,231.62a8,8,0,1,1-4.85-15.25l64-20.37-64-20.38a8,8,0,1,1,4.85-15.24L128,187.6l85.57-27.22a8,8,0,1,1,4.85,15.24l-64,20.38,64,20.37A8,8,0,0,1,223.62,226.42ZM68,108c0-20.1,9.77-40.87,28.24-60a156,156,0,0,1,27.57-22.76,8,8,0,0,1,8.38,0C134.47,26.59,188,60.08,188,108a60,60,0,0,1-120,0Zm60,44a16,16,0,0,0,16-16c0-13.57-10-24.46-16-29.79-6,5.33-16,16.22-16,29.79A16,16,0,0,0,128,152ZM84,108a43.83,43.83,0,0,0,12.09,30.24c0-.74-.09-1.49-.09-2.24,0-28,26.44-45.91,27.56-46.66a8,8,0,0,1,8.88,0C133.56,90.09,160,108,160,136c0,.75,0,1.5-.09,2.24A43.83,43.83,0,0,0,172,108c0-32-32.26-58-44-66.34C116.27,50,84,76,84,108Z"
          ></path>
        </svg>
      </div>

      <div class="auth-title">
        <h3 class="fw-bold mb-1">Sign In</h3>
        <p class="auth-subtitle mb-0">
          Welcome back! Please enter your details
        </p>
      </div>

      <!-- Login form -->
      <form action="/login" method="POST" class="needs-validation" novalidate>
        <div class="mb-3">
          <label for="email" class="form-label">Email Address</label>
          <input
            id="email"
            name="email"
            type="email"
            class="form-control"
            placeholder="you@example.com"
            autocomplete="email"
            inputmode="email"
            required
            pattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$"
            title="Enter a valid email."
          />
          <div class="invalid-feedback">
            Please enter a valid email (name@domain.com).
          </div>
        </div>

        <div class="mb-2">
          <label for="password" class="form-label">Password</label>
          <input
            id="password"
            name="password"
            type="password"
            class="form-control"
            autocomplete="current-password"
            required
          />
          <div class="invalid-feedback">Please enter your password.</div>
        </div>

        <div class="d-flex justify-content-between align-items-center my-2">
          <a href="/forgot-password" class="text-decoration-none"
            >Forgot your password?</a
          >
        </div>

        <button class="btn btn-primary w-100 py-2" type="submit">
          Sign in
        </button>
      </form>

      <div class="auth-divider"></div>

      <!-- One-line Google login -->
      <div class="login-google-inline">
        <span class="text-muted">Or</span>
        <button
          class="gsi-material-button"
          type="button"
          onclick="window.location.href='/auth/google'"
        >
          <div class="gsi-material-button-content-wrapper">
            <div class="gsi-material-button-icon">
              <!-- Multicolor Google 'G' (from Google docs) -->
              <svg
                viewBox="0 0 48 48"
                aria-hidden="true"
                focusable="false"
                style="display: block"
              >
                <path
                  fill="#EA4335"
                  d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"
                />
                <path
                  fill="#4285F4"
                  d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"
                />
                <path
                  fill="#FBBC05"
                  d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"
                />
                <path
                  fill="#34A853"
                  d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"
                />
                <path fill="none" d="M0 0h48v48H0z" />
              </svg>
            </div>
            <span class="gsi-material-button-contents"
              >Sign in with Google</span
            >
          </div>
        </button>
      </div>
      <div class="auth-bottom">
        Don’t have an account? <a href="/register">Sign up</a>
      </div>
    </div>
  </div>
</div>

<!-- Client-side Bootstrap validation -->
<script>
  (function () {
    const forms = document.querySelectorAll(".needs-validation");
    Array.from(forms).forEach((form) => {
      form.addEventListener(
        "submit",
        (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        },
        false
      );
    });
  })();
</script>
